import{j as e,B as N,r as i,d as v,S as w,u as T,e as _,f as k,g as A,h as D}from"./index-dbc9d3da.js";import{M as z}from"./move-right-9f8e8a7c.js";const P=({handleSubmit:t,onCancel:h})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-[#f5f5dc] p-6 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-lg mb-4 font-harlow text-[#ff6347]",children:"Are you sure you want to submit your score?"}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(N,{variant:"outline",className:"text-[#ff6347] bg-transparent py-2 px-4 rounded-lg transition-colors duration-300",onClick:h,children:"No"}),e.jsx(N,{className:"bg-[#ff6347] text-white py-2 px-4 rounded-lg hover:bg-gray-500 transition-colors duration-300",onClick:t,children:"Yes"})]})]})}),$=({data:t,fetchData:h,moveToNextTab:y})=>{const[b,I]=i.useState(localStorage.getItem("ip")?localStorage.getItem("ip"):""),[g,u]=i.useState([]),[a,f]=i.useState({talent:"",creativity:"",stagePresence:"",relevanceToICT:"",timeAdherence:""}),[j,p]=i.useState(!1),s=d=>{const{name:n,value:o}=d.target;let c=parseInt(o,10);if(o===""){f({...a,[n]:""});return}else isNaN(c)&&(c=0);let m=0;n==="talent"?m=30:n==="creativity"||n==="stagePresence"?m=20:(n==="relevanceToICT"||n==="timeAdherence")&&(m=15),c>m?c=m:c<0&&(c=0),c=Math.min(c,99),f({...a,[n]:c})},r=Object.values(a).reduce((d,n)=>d+(parseInt(n,10)||0),0),l=()=>{p(!1),localStorage.setItem(`scores_${t==null?void 0:t.name}`,JSON.stringify(a)),localStorage.setItem(`voted_${t==null?void 0:t.uid}`,"true"),console.log("Scores submitted:",a),h(),y()},C=()=>{p(!1)},S=async()=>{var o,c,m;p(!0);const d=[a.talent,a.creativity,a.stagePresence,a.relevanceToICT,a.timeAdherence].map(Number),n=[{ip:b||"",voted_to:t==null?void 0:t.uid,name:localStorage.getItem("name"),score:d,event_type:2}];try{const x=await v.post("/vote/all/",n,{headers:{"Content-Type":"application/json",Authorization:`Token ${localStorage.getItem("accessToken")}`}});w.fire({icon:"success",title:"Updated Successfully...",showConfirmButton:!1,timer:2e3}),l(),localStorage.setItem("user",JSON.stringify(x.data))}catch(x){console.error("Error fetching data:",x.response?x.response.data:x.message),w.fire({icon:"error",title:"Oops...",text:((m=(c=(o=x.response)==null?void 0:o.data)==null?void 0:c.non_field_errors)==null?void 0:m[0])||x.message,showConfirmButton:!1}),l()}};return i.useEffect(()=>{const d=localStorage.getItem(`scores_${t==null?void 0:t.name}`);d&&f(JSON.parse(d)),(async()=>{try{const o=await v.get("vote/all/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});u(o.data),console.log("Fetched data:",o.data)}catch(o){console.error("Error fetching data:",o.response?o.response.data:o.message)}})()},[t==null?void 0:t.name]),e.jsxs("div",{className:"mb-12 border-4 border-[#ff6347] rounded-lg p-4 overflow-auto bg-[#f5f5dc] shadow-lg",children:[e.jsxs("p",{className:"text-[#ff6347] text-lg mb-2 animate-bounce font-harlow",children:["ðŸ“¼ Now Playing: ",e.jsx("u",{className:" text-3xl ",children:t==null?void 0:t.name})]}),e.jsx("p",{className:"text-[#ff6347] font-harlow text-xl mb-2 text-center",children:"Scoring Matrix "}),e.jsxs("table",{className:"w-full border-collapse border border-[#ff6347] text-[#333]",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Criteria"}),e.jsx("th",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Description"}),e.jsx("th",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Points"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Talent"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Skill level, technique, and overall performance quality"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:30,name:"talent",value:a.talent,onInput:s}),e.jsx("span",{className:"ml-1",children:"/ 30"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Creativity"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Originality of the act, unique ideas, and innovative approach"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:20,name:"creativity",value:a.creativity,onInput:s}),e.jsx("span",{className:"ml-1",children:"/ 20"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Stage Presence"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Confidence, charisma, and ability to engage the audience"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:20,name:"stagePresence",value:a.stagePresence,onInput:s}),e.jsx("span",{className:"ml-1",children:"/ 20"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Relevance to ICT"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Effective integration of ICT in the performance, enhancing the overall presentation"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:15,name:"relevanceToICT",value:a.relevanceToICT,onInput:s}),e.jsx("span",{className:"ml-1",children:"/ 15"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Time Adherence"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Staying within the 2-3 minutes time limit"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:15,name:"timeAdherence",value:a.timeAdherence,onInput:s}),e.jsx("span",{className:"ml-1",children:"/ 15"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:" "}),e.jsx("td",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Total"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsx("div",{className:"",children:e.jsxs("span",{className:"ml-1",children:[" ",r,"/ 100"]})})})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{className:"bg-[#ff6347] text-white py-2 px-4 rounded-lg hover:bg-[#ff4500] transition-colors duration-300",onClick:S,children:"Submit"})}),j&&e.jsx(P,{handleSubmit:S,onConfirm:l,onCancel:C})]})},M=()=>{const[t,h]=i.useState([]),[y,b]=i.useState([]),[I,g]=i.useState(""),[u,a]=i.useState(""),f=async()=>{try{const s=await v.get("contestant/all/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});if(h(s.data.event_type_2),b(s.data),s.data.event_type_2.length>0){const r=s.data.event_type_2.find(l=>!localStorage.getItem(`voted_${l.uid}`));r?(g(r.name),a(r.name)):(g(s.data.event_type_2[0].name),a(s.data.event_type_2[0].name))}console.log("Fetched data:",s.data)}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message)}};i.useEffect(()=>{f()},[]);const j=()=>{const r=(t.findIndex(l=>l.name===u)+1)%t.length;a(t[r].name)},p=T();return e.jsxs("div",{className:"mains w-screen h-screen flex items-start justify-center overflow-y-auto",children:[e.jsxs(N,{onClick:()=>{p("/yepa2024/vote/mrqen")},className:" absolute z-[9999] right-0 top-0 mr-5 mt-10 text-[#ca5a4c] bg-[#ffdc73] font-harlow hover:bg-[#8e4036]",children:[e.jsx(z,{})," Switch to Mr & Ms Voting"]}),e.jsx("div",{className:"sunburst-bg w-screen h-screen flex items-center absolute z-0"}),e.jsx("div",{className:" z-40 absolute"}),e.jsx("div",{className:"w-[90%] z-30 flex items-center justify-center mt-[200px] mx-4 sm:mx-12 ",children:t.length>0&&e.jsxs(_,{value:u,onValueChange:a,className:"w-auto text-ellipsis z-26",children:[e.jsx("p",{className:"text-[#ff6347] font-harlow text-3xl mb-4 text-center",children:"Performance Battle "}),e.jsx(k,{className:"z-26 w-screenont-harlow grid grid-cols-10 xslg:grid-cols-5 xs:grid-cols-2 xs:mx-44 gap-2",children:t.map((s,r)=>{const l=localStorage.getItem(`voted_${s.uid}`)==="true";return e.jsx(A,{value:s.name,disabled:l,className:`z-28 font-harlow data-[state=active]:text-[#ca5a4c] data-[state=active]:text-md data-[state=active]:bg-[#ffdc73] ${l?"opacity-50 cursor-not-allowed":""}`,children:"Contestant "+(r+1)},r)})}),t.map((s,r)=>e.jsx(D,{value:s.name,className:"xs:mx-44 mt-20",children:e.jsx($,{index:r,data:s,fetchData:f,moveToNextTab:j})},r))]})})]})};export{M as default};
