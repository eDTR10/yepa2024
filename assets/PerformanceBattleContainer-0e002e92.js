import{j as e,B as S,r as l,d as N,S as w,e as C,f as _,g as A,h as k}from"./index-d374ecf6.js";const D=({handleSubmit:t,onCancel:h})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-[#f5f5dc] p-6 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-lg mb-4 font-harlow text-[#ff6347]",children:"Are you sure you want to submit your score?"}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(S,{variant:"outline",className:"text-[#ff6347] bg-transparent py-2 px-4 rounded-lg transition-colors duration-300",onClick:h,children:"No"}),e.jsx(S,{className:"bg-[#ff6347] text-white py-2 px-4 rounded-lg hover:bg-gray-500 transition-colors duration-300",onClick:t,children:"Yes"})]})]})}),P=({data:t,fetchData:h,moveToNextTab:v})=>{const[u,I]=l.useState(localStorage.getItem("ip")?localStorage.getItem("ip"):""),[b,p]=l.useState([]),[r,f]=l.useState({talent:"",creativity:"",stagePresence:"",relevanceToICT:"",timeAdherence:""}),[g,s]=l.useState(!1),a=d=>{const{name:n,value:o}=d.target;let c=parseInt(o,10);if(o===""){f({...r,[n]:""});return}else isNaN(c)&&(c=0);let m=0;n==="talent"?m=30:n==="creativity"||n==="stagePresence"?m=20:(n==="relevanceToICT"||n==="timeAdherence")&&(m=15),c>m?c=m:c<0&&(c=0),c=Math.min(c,99),f({...r,[n]:c})},i=Object.values(r).reduce((d,n)=>d+(parseInt(n,10)||0),0),j=()=>{s(!1),localStorage.setItem(`scores_${t==null?void 0:t.name}`,JSON.stringify(r)),localStorage.setItem(`voted_${t==null?void 0:t.uid}`,"true"),console.log("Scores submitted:",r),h(),v()},T=()=>{s(!1)},y=async()=>{var o,c,m;s(!0);const d=[r.talent,r.creativity,r.stagePresence,r.relevanceToICT,r.timeAdherence].map(Number),n=[{ip:u||"",voted_to:t==null?void 0:t.uid,name:localStorage.getItem("name"),score:d,event_type:2}];try{const x=await N.post("/vote/all/",n,{headers:{"Content-Type":"application/json",Authorization:`Token ${localStorage.getItem("accessToken")}`}});w.fire({icon:"success",title:"Updated Successfully...",showConfirmButton:!1,timer:2e3}),j(),localStorage.setItem("user",JSON.stringify(x.data))}catch(x){console.error("Error fetching data:",x.response?x.response.data:x.message),w.fire({icon:"error",title:"Oops...",text:((m=(c=(o=x.response)==null?void 0:o.data)==null?void 0:c.non_field_errors)==null?void 0:m[0])||x.message,showConfirmButton:!1}),j()}};return l.useEffect(()=>{const d=localStorage.getItem(`scores_${t==null?void 0:t.name}`);d&&f(JSON.parse(d)),(async()=>{try{const o=await N.get("vote/all/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});p(o.data),console.log("Fetched data:",o.data)}catch(o){console.error("Error fetching data:",o.response?o.response.data:o.message)}})()},[t==null?void 0:t.name]),e.jsxs("div",{className:"mb-12 border-4 border-[#ff6347] rounded-lg p-4 overflow-auto bg-[#f5f5dc] shadow-lg",children:[e.jsxs("p",{className:"text-[#ff6347] text-lg mb-2 animate-bounce font-harlow",children:["ðŸ“¼ Now Playing: ",e.jsx("u",{className:" text-3xl ",children:t==null?void 0:t.name})]}),e.jsx("p",{className:"text-[#ff6347] font-harlow text-xl mb-2 text-center",children:"Scoring Matrix "}),e.jsxs("table",{className:"w-full border-collapse border border-[#ff6347] text-[#333]",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Criteria"}),e.jsx("th",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Description"}),e.jsx("th",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Points"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Talent"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Skill level, technique, and overall performance quality"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:30,name:"talent",value:r.talent,onInput:a}),e.jsx("span",{className:"ml-1",children:"/ 30"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Creativity"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Originality of the act, unique ideas, and innovative approach"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:20,name:"creativity",value:r.creativity,onInput:a}),e.jsx("span",{className:"ml-1",children:"/ 20"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Stage Presence"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Confidence, charisma, and ability to engage the audience"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:20,name:"stagePresence",value:r.stagePresence,onInput:a}),e.jsx("span",{className:"ml-1",children:"/ 20"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Relevance to ICT"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Effective integration of ICT in the performance, enhancing the overall presentation"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:15,name:"relevanceToICT",value:r.relevanceToICT,onInput:a}),e.jsx("span",{className:"ml-1",children:"/ 15"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Time Adherence"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:"Staying within the 2-3 minutes time limit"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-10 p-1",max:15,name:"timeAdherence",value:r.timeAdherence,onInput:a}),e.jsx("span",{className:"ml-1",children:"/ 15"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:" "}),e.jsx("td",{className:"border border-[#ff6347] p-2 bg-[#ffebcd] text-[#ff6347]",children:"Total"}),e.jsx("td",{className:"border border-[#ff6347] p-2 text-xs",children:e.jsx("div",{className:"",children:e.jsxs("span",{className:"ml-1",children:[" ",i,"/ 100"]})})})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{className:"bg-[#ff6347] text-white py-2 px-4 rounded-lg hover:bg-[#ff4500] transition-colors duration-300",onClick:y,children:"Submit"})}),g&&e.jsx(D,{handleSubmit:y,onConfirm:j,onCancel:T})]})},z=()=>{const[t,h]=l.useState([]),[v,u]=l.useState([]),[I,b]=l.useState(""),[p,r]=l.useState(""),f=async()=>{try{const s=await N.get("contestant/all/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});if(h(s.data.event_type_2),u(s.data),s.data.event_type_2.length>0){const a=s.data.event_type_2.find(i=>!localStorage.getItem(`voted_${i.uid}`));a?(b(a.name),r(a.name)):(b(s.data.event_type_2[0].name),r(s.data.event_type_2[0].name))}console.log("Fetched data:",s.data)}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message)}};l.useEffect(()=>{f()},[]);const g=()=>{const a=(t.findIndex(i=>i.name===p)+1)%t.length;r(t[a].name)};return e.jsxs("div",{className:"mains w-screen h-screen flex items-start justify-center overflow-y-auto",children:[e.jsx("div",{className:"sunburst-bg w-screen h-screen flex items-center absolute z-0"}),e.jsx("div",{className:"w-[90%] z-30 flex items-center justify-center mt-[200px] mx-4 sm:mx-12 ",children:t.length>0&&e.jsxs(C,{value:p,onValueChange:r,className:"w-auto text-ellipsis z-26",children:[e.jsx("p",{className:"text-[#ff6347] font-harlow text-3xl mb-4 text-center",children:"Performance Battle "}),e.jsx(_,{className:"z-26 w-screenont-harlow grid grid-cols-10 xslg:grid-cols-5 xs:grid-cols-2 xs:mx-44 gap-2",children:t.map((s,a)=>{const i=localStorage.getItem(`voted_${s.uid}`)==="true";return e.jsx(A,{value:s.name,disabled:i,className:`z-28 font-harlow data-[state=active]:text-[#ca5a4c] data-[state=active]:text-md data-[state=active]:bg-[#ffdc73] ${i?"opacity-50 cursor-not-allowed":""}`,children:"Contestant "+(a+1)},a)})}),t.map((s,a)=>e.jsx(k,{value:s.name,className:"xs:mx-44 mt-20",children:e.jsx(P,{index:a,data:s,fetchData:f,moveToNextTab:g})},a))]})})]})};export{z as default};
